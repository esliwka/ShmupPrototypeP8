pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
--basic shmup
--elim

--variables

function _init()
	player={
		sp=194,
		x=8,
		y=88,
		w=16,
		h=16,
		hbx_w=6,
		hbx_h=6,
		flp=false,
		dx=0,
		dy=0,
		max_dx=5,
		max_dy=5,
		boost=5,
		anim=0,
		lives=3,
		bombs=3,
		shooting=false,
		invul=false
	}
	t=0
	
 bombcd=0
	
	p_blt={}
  
	e_blt={}
	e_wv_blt={}
	e_las={}
  
	stars={}
  
	init_menu()
	--map limits
	--map_start=0
	--map_end=296
end

function init_menu()
	_update60=update_menu
	_draw=draw_menu
end

function init_game()
	_update60=update_game
	_draw=draw_game
end
-->8
--updates and draws

function update_menu()
	if btnp(‚ùé) then
		init_game()
	end
end

function draw_menu()
	cls()
	print("press ‚ùé to start",30,63)
end

function update_game()
	u_player()
	t=flr(time())
	mv_stars()
	mv_bullets()
	--i have to change this lol
	if rnd(6)-5>0 then
		makestars()
	end
	if rnd(5)-4>0 then
	 makewtars()
	end
end

function draw_game()
	cls(129)
	d_ui()
	d_stars()
	d_bullets()
	spr(player.sp,player.x,player.y,2,2)
end

function d_ui()
	rect(0,0,127,16,11)
	print("‚ô•"..player.lives,2,2,142)
	print("‚óÜ"..player.bombs,2,10,13)
	print(player.y,32,10)
	print(player.x,32,2)
	print("time: "..t,48,2)
	print("blt:  "..#p_blt,48,10)
end

function u_player()
	--movement
	player.sp=194
	if btn(‚¨ÖÔ∏è) and player.x>0 then
		player.x-=1
		player.sp=192
	end
	if btn(‚û°Ô∏è) and player.x<112 then
		player.x+=1
		player.sp=196
	end
	if btn(‚¨ÜÔ∏è) and player.y>17 then
		player.y-=1
	end
	if btn(‚¨áÔ∏è) and player.y<112 then
		player.y+=1
	end
	
	if btnp(‚ùé) then
		fire()
	end
	
	if btnp(üÖæÔ∏è) and bombcd==0 then
		bomb()	
	end
end
-->8
--player functions

function fire()
	local b={}
	b.sp=200
	b.x=player.x
	b.y=player.y+5
	b.dx=0
	b.dy=-3
	add(p_blt,b)
	local b={}
	b.sp=200
	b.x=player.x+9
	b.y=player.y+5
	b.dx=0
	b.dy=-3
	add(p_blt,b)
end

function d_bullets()
	for b in all(p_blt) do
		spr(b.sp,b.x,b.y)
	end
end

function mv_bullets()
	for b in all(p_blt) do
		b.y+=b.dy
		if b.y<=16 then
			del(p_blt,b)
		end
	end
end

function bomb()
	print("‚úΩbomb‚úΩ",50,63)
	player.bombs-=1
end
-->8
--gfx stuff

function makestars()
	local b = {}
	b.cl=5
	b.x=flr(rnd(128))
	b.y=flr(rnd(4))+17
	b.dx=-0.25+b.x/256
	b.dy=1-b.dx/2
	add(stars,b)
end

function makewtars()
	local b = {}
	b.cl=6
	
	b.x=flr(rnd(128))
	b.y=flr(rnd(5))+14
	b.dx=-1.5+b.x/48
	b.dy=2-b.dx/2
	add(stars,b)
end

function d_stars()
	for b in all(stars) do
		circfill(b.x,b.y,0.5,b.cl)
	end
end


function mv_stars()
	for b in all(stars) do
		b.y+=b.dy
		b.x+=b.dx
		if b.y>128 or b.x<-4 or b.x>128 then 
			del(stars,b)
		end
	end
 
	for b in all(wtars) do
		b.y+=b.dy+spd
		if b.y>128 then 
			del(stars,b)
		end
	end 
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000550000000000000055000000000000005500000000000000550000000000b000000000000000000000000000000000000000000000000000000000000
0000000550000000000000055000000000000005500000000000000550000000000b000000000000000000000000000000000000000000000000000000000000
0000005dd50000000000005dd50000000000005dd50000000000005dd50000000003000000000000000000000000000000000000000000000000000000000000
0000005dd50000000000005dd50000000000005dd50000000000005dd50000000000000000000000000000000000000000000000000000000005000000060000
000005cddc500000000005cddc500000000005cddc500000000005cddc5000000000000000000000000000000000000000000000000000000000000000000000
000505dccd505000000505dccd505000000505dccd505000000505dccd5050000000000000000000000000000000000000000000000000000000000000000000
000505d66d505000000505d66d505000000505d66d505000000505d66d5050000000000000000000000000000000000000000000000000000000000000000000
000556d66d655000000556d66d655000000556d66d655000000556d66d6550000000000000000000000000000000000000000000000000000000000000000000
000566d66d665000000566d66d665000000566d66d665000000566d66d6650000000000000000000000000000000000000000000000000000000000000000000
005666d66d666500005666d66d666500005666d66d666500005666d66d6665000000000000000000000000000000000000000000000000000000000000000000
055656d66d656550055656d66d656550055656d66d656550055656d66d6565500000000000000000000000000000000000000000000000000000000000000000
566566d66d665665566566d66d665665566566d66d665665566566d66d6656650000000000000000000000000000000000000000000000000000000000000000
5a6655dddd5566955a6655dddd5566a5596655dddd5566a55a6655dddd5566a50000000000000000000000000000000000000000000000000000000000000000
00a6505dd505690000a6505dd5056a000096505dd5056a0000a6505dd5056a000000000000000000000000000000000000000000000000000000000000000000
000a505dd5059000000a005dd500a0000009005dd500a000000a005dd500a0000000000000000000000000000000000000000000000000000000000000000000
00000005500000000000000550000000000000055000000000000005500000000000000000000000000000000000000000000000000000000000000000000000
